<p-toast />

<div class="max-w-md mx-auto mt-8 p-6 bg-white rounded-lg shadow-md">
  <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Upload Your Short</h2>
  <div *ngIf="uploadProgress >= 0">
    <mat-progress-bar mode="determinate" [value]="uploadProgress"></mat-progress-bar>
    <p>{{ uploadProgress }}% uploaded</p>
  </div>
  
  <div class="mb-6">
    <div 
      (click)="triggerFileInput()" 
      class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors"
    >
      <input 
        #fileInput
        type="file" 
        (change)="onFileSelected($event)" 
        accept="video/*" 
        class="hidden"
      >
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg>
      <p class="mt-2 text-sm text-gray-600">Click to select a video or drag and drop your file here</p>
    </div>
  </div>

  <div *ngIf="previewUrl" class="mb-6">
    <h3 class="text-lg font-semibold mb-2 text-gray-700">Preview:</h3>
    <video #videoPlayer controls class="w-full rounded-lg">
      <source [src]="previewUrl" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
  <!-- <app-trim-slider *ngIf="previewUrl"   [selectedFile]="selectedFile" [videoSrc]="previewUrl"></app-trim-slider> -->

  <div class="mb-4">
    <label for="caption" class="block text-sm font-medium text-gray-700 mb-1">Caption</label>
    <input 
      type="text" 
      id="caption" 
      [(ngModel)]="caption" 
      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      placeholder="Enter a catchy caption"
    >
  </div>

  <div class="mb-6">
    <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description (optional)</label>
    <textarea 
      id="description" 
      [(ngModel)]="description" 
      rows="3" 
      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      placeholder="Add more details about your short"
    ></textarea>
  </div>
  <button 
    (click)="uploadShort()" 
    class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
    Upload Short
  </button>
</div>